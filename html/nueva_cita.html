<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="../css/estilos.css">

        <script src="../js/citas.js">
        </script>
        
        <title>Nueva Cita</title>
    </head>

    <body onload="cargarCita()"><!--onload es un evento que se dispara cuando un elemento ha terminado de cargar. En el contexto del <body>, se dispara una vez que todo el contenido de la página, incluidos recursos como imágenes, scripts y estilos, ha cargado, por lo que en este caso, una vez que todo el contenido de la pagina se ha cargado, se llama a la función cargarCita(). Esta función lo que hace es comprobar si la carga de esta pagina nueva_cita.html obecede a que se quiere crear una nueva cita o a que se quiere modificar una cita existente. En el caso de ser esta segunda opcion, se cargarian en los campos del formulario los valores de los atributos de la cita que se indicó que se quiere modificar-->
        
        <header>
            <div class="logo_titulo">
                <img src="../img/logo.png" alt="Logo" class="logo">
                <h1>MEDACDENT</h1>
            </div>

            <nav>
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="listado_citas.html">Listado de Citas</a></li>
                </ul>
            </nav>
        </header>   

        <main>
            <p class="texto">Reserve una Cita</p>
            
            <div id="main_formulario">

                <!--El evento onsubmit se activa cuando el formulario es enviado, es decir, cuando el usuario hace clic en el botón de enviar. La función validarYCrearCita(event) se ejecuta, y el argumento event es el objeto de evento que contiene información sobre la acción que se está realizando (en este caso, el envío del formulario). La función validarYCrearCita(event) se encarga de validar el formulario antes de ejecutar la función que crea la cita (la función crearCita() es llamada al final de la función validarYCrearCita() cuando ésta comprueba que el formulario es correcto)-->
                <form id="formulario" onsubmit="validarYCrearCita(event)">

                    <div id="datos_form">

                        <label for="fecha_hora">Fecha y Hora:</label>
                        <input oninput="validar_FechaYHora()" type="datetime-local" class="form_control" name="fecha_hora" id="fecha_hora" required><br> 
                        <!--La función validar_FechaYHora() se encarga de validar que la fecha y hora introducida es igual o posterior al momento actual. El atributo oninput es un evento que se dispara inmediatamente cada vez que el valor de un campo de entrada cambia su contenido-->

                        <br>

                        <h3 class="form_title" style="text-align: center;">Información del paciente</h3> 

                        <label for="nombre">Nombre:</label>
                        <input type="text" class="form_input" name="nombre" id="nombre" pattern="^[A-Za-zÀ-ÿ\s]+$" title="El nombre solo puede contener letras y espacios"  placeholder="Introduzca el nombre del paciente" required><br>

                        <label for="apellidos">Apellidos:</label>
                        <input type="text" class="form_input" name="apellidos" id="apellidos" pattern="^[A-Za-zÀ-ÿ\s]+$" title="Los apellidos solo pueden contener letras y espacios" placeholder="Introduzca los apellidos del paciente" required><br>

                        <label for="dni">DNI:</label>
                        <input type="text" class="form_input" name="dni" id="dni" pattern="[0-9]{8}[A-Za-z]{1}" title="Tienes que introducir 8 dígitos + 1 letra" minlength="9" maxlength="9" placeholder="12345678X" required><br>

                        <label for="telefono">Teléfono:</label>
                        <input type="tel" class="form_input" name="telefono" id="telefono" pattern="[0-9]{9}" title="Tienes que introducir 9 dígitos" minlength="9" maxlength="9"  placeholder="XXXXXXXXX" required> <br>

                        <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
                        <input type="date" class="form_input" name="fecha_nacimiento" id="fecha_nacimiento" value="2000-01-01" required><br>

                        <label for="observaciones">Observaciones:</label>
                        <textarea class="form_input form_input__message" name="observaciones" id="observaciones" placeholder="Introduzca aquí las observaciones que desee añadir"></textarea>
                            
                        <input type="submit" value="Reservar Cita" class="form_boton" >
                        <!--No utilizamos el atributo onclick = "crearCita()" porque con el type = "submit", el formulario intentará enviarse y recargar la página antes de que crearCita() complete su ejecución y esto no funciona bien. Cuando se usa un input de tipo submit junto con el atributo onclick(), puedes encontrarte con un problema de comportamiento relacionado con el flujo de eventos en los formularios HTML. Este comportamiento tiene que ver con cómo interactúan el evento de clic (onclick()) y el envío del formulario. El evento onclick() y el evento de envío del formulario (submit) pueden entrar en conflicto porque ambos intentan realizar una acción: el evento onclick() se dispara cuando el usuario hace clic en el submit, pero antes de que el formulario se envíe. Esto puede interferir con la validación automática del formulario de HTML5 y el envío del formulario.
                        Y utilizamos type = "submit" porque en HTML5, un input de tipo submit automáticamente activa la validación del formulario antes de enviarlo. Esto es una característica incorporada en los navegadores modernos que sigue las especificaciones de HTML5.-->
                    </div>
                </form>
            </div>    
        </main>

        <footer>
            <div class="pie">
                <div>
                    <h4 id="tambien">También puedes visitarnos en:</h4>
        
                    <a href=# target="_blank"> <img src="../img/youtube.png" alt="Youtube"
                            width="100" height="30"></a>
                    <a href=# target="_blank"> <img src="../img/instagram.png"
                            alt="Instagram" width="100" height="30"></a>
                    <a href=# target="_blank"> <img src="../img/telegram.png" alt="Telegram"
                            width="100" height="30"></a>
                </div>
                <div>
                    <h4 class="contacto">Contacta con nosotros</h4>
                    <h4 class="contacto">Avisos legales</h4>
                    <a href="https://www.interior.gob.es/opencms/es/politica-de-cookies/" id="politica">Política de cookies</a>
                </div>
            </div>
        </footer>

    </body>
</html>